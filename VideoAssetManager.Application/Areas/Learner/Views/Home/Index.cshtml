@{
    string RoleName = string.Empty;
    if (string.IsNullOrEmpty(VideoAssetManager.CommonUtils.RekhtaUtility.RoleName))
        RoleName = "Admin";
    else
        RoleName = VideoAssetManager.CommonUtils.RekhtaUtility.RoleName;

    if (RoleName.ToLower()=="super admin")
        ViewData["Title"] = "Rekhta Events";
    else
        ViewData["Title"] = "Rekhta VAM";

    DateTime dt = DateTime.Now;
    var selectedmonth = dt.Month.ToString();
    var selectedyear = dt.Year.ToString();

}

<style>
    .report {
        pointer-events: none;
    }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<div class="text-center">
    <h3>Welcome to Rekhta Video Asset Manager</h3>
</div>

<div class="box box-primary">
    <div class="box-body">
        <div class="row">
            <div class="col-md-2">
                <b><label>Month:</label></b>
                <select id="ddlmonth" name="ddlmonth" class="form-control select2" onchange="DayWiseReport()">
                    <option value="1">January</option>
                    <option value="2">Febuary</option>
                    <option value="3">March</option>
                    <option value="4">April</option>
                    <option value="5">May</option>
                    <option value="6">June</option>
                    <option value="7">July</option>
                    <option value="8">August</option>
                    <option value="9">September</option>
                    <option value="10">October</option>
                    <option value="11">November</option>
                    <option value="12">December</option>
                </select>
            </div>
            <div class="col-md-2">
                <b><label>Year:</label></b>
                <select id="ddlYear" name="ddlYear" class="form-control select2" onchange="DayWiseReport()">
                    <option value="2021">2021</option>
                    <option value="2022">2022</option>
                    <option value="2023">2023</option>
                    <option value="2024">2024</option>
                    <option value="2025">2025</option>
                    <option value="2026">2026</option>
                    <option value="2027">2027</option>
                    <option value="2028">2028</option>
                    <option value="2029">2029</option>
                    <option value="2030">2030</option>
                    <option value="2031">2031</option>
                    <option value="2032">2032</option>
                </select>
            </div>
            <br />
            <br />
            <br />
            <br />
            <br />
        </div>
            <div class="row">
                <div class="col-md-5">
                    <div Style="font-family: Corbel; font-size: small ;text-align:center " class="row">
                        <div>
                            <div style="width:100%;height:50%">
                                <canvas id="dayChart" style="padding: 0;margin: auto;display: block;"> </canvas>
                            </div>
                        </div>
                    </div>
                    <div Style="font-family: Corbel; font-size: small ;text-align:center; " class="row">
                    </div>
                </div>
                <div class="col-md-5">
                   
                     <div Style="font-family: Corbel; font-size: small ;text-align:center " class="row">
                         <div>
                             <div style="width:70%;height:50%">
                                 <canvas id="myChart1" style="padding: 0;margin: auto;display: block; "> </canvas>
                             </div>
                         </div>
                     </div>
                     <div Style="font-family: Corbel; font-size: small ;text-align:center; " class="row">
                     </div>
                 </div>
                 <div class="col-md-5">
                    <br />
                     <br />
                     <br />
                    <div Style="font-family: Corbel; font-size: small ;text-align:center " class="row">
                        <div>
                            <div style="width:60%;height:50%">
                                <canvas id="monthChart" style="padding: 0;margin: auto;display: block; "> </canvas>
                            </div>
                        </div>
                    </div>
                    <div Style="font-family: Corbel; font-size: small ;text-align:center; " class="row">
                    </div>
                </div>
                
                 
            </div>
    </div>
</div>
<script>
    $(document).ready(function () {
       
                $("#ddlmonth").val('@selectedmonth');
                $("#ddlYear").val('@selectedyear');
                DayWiseReport();                
            });


    function DayWiseReport() {
                var month = $("#ddlmonth").val();
                var year = $("#ddlYear").val();
                $.ajax({
                    type: "POST",
                    url: "Learner/Home/DayWiseReport",
                    contentType: 'application/x-www-form-urlencoded; charset=utf-8',
                    data: { _month: month, _year: year },
                    dataType: "json",
                    success: function (mems) {
                        var aData = mems;
                        var aLabels = aData[0];
                        var aDatasets1 = aData[1];
                        var dataT = {
                            labels: aLabels,
                            datasets: [{
                                label: "Course Purchase",
                                data: aDatasets1,
                                fill: false,
                                backgroundColor: "#36a2eb",
                                borderColor: "#eb7f36",
                                borderWidth: 1
                            }]
                        };
                        var ctx = $("#dayChart").get(0).getContext("2d");                        
                        myNewChart = new Chart(ctx, {                           
                            type: 'bar',
                            data: dataT,
                            options: {
                                responsive: true,
                                title: { display: true, text: 'Course Purchase Day Wise' },
                                legend: { position: 'bottom' },
                                scales: {

                                    xAxes: [{ gridLines: { display: false }, display: true, scaleLabel: { display: false, labelString: '' } }],
                                    yAxes: [{ gridLines: { display: false }, display: true, scaleLabel: { display: false, labelString: '' }, ticks: { stepSize: 50, beginAtZero: true } }]

                                },
                            }
                        
                        });
                    }
                });
            myNewChart.destroy();
            }



            $.ajax({
                type: "POST",
                url: "Learner/Home/MonthWiseReport",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (mems) {
                    var aData = mems;
                    var aLabels = aData[0];
                    var aDatasets1 = aData[1];
                    var dataT = {
                        labels: aLabels,
                        datasets: [{
                            label: "Course Purchase",
                            data: aDatasets1,
                            fill: false,
                            backgroundColor: "#36a2eb",
                            borderColor: "#eb7f36",
                            //backgroundColor: ["rgba(54, 162, 235, 0.2)", "rgba(255, 99, 132, 0.2)", "rgba(255, 159, 64, 0.2)", "rgba(255, 205, 86, 0.2)", "rgba(75, 192, 192, 0.2)", "rgba(153, 102, 255, 0.2)", "rgba(201, 203, 207, 0.2)"],
                            //borderColor: ["rgb(54, 162, 235)", "rgb(255, 99, 132)", "rgb(255, 159, 64)", "rgb(255, 205, 86)", "rgb(75, 192, 192)", "rgb(153, 102, 255)", "rgb(201, 203, 207)"],
                            borderWidth: 1
                        }]
                    };
                    var ctx = $("#monthChart").get(0).getContext("2d");
                    var myNewChart = new Chart(ctx, {
                        type: 'bar',
                        data: dataT,
                        options: {
                            responsive: true,
                            title: { display: true, text: 'Course Purchase Month Wise' },
                            legend: { position: 'bottom' },
                            scales: {
                                xAxes: [{ gridLines: { display: false }, display: true, scaleLabel: { display: false, labelString: '' } }],
                                yAxes: [{ gridLines: { display: false }, display: true, scaleLabel: { display: false, labelString: '' }, ticks: { stepSize: 50, beginAtZero: true } }]
                            },
                        }
                    });
                }
            });



            $.ajax({
                type: "POST",
                url: "Learner/Home/CoursePurchaseReport",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (mems) {
                    var aData = mems;
                    var aLabels = aData[0];
                    var aDatasets1 = aData[1];
                    var dataT = {
                        labels: aLabels,
                        datasets: [{
                            label: "Total Course Purchase",
                            data: aDatasets1,
                            fill: false,
                            backgroundColor: ["rgba(54, 162, 235, 0.2)", "rgba(255, 99, 132, 0.2)", "rgba(255, 159, 64, 0.2)", "rgba(255, 205, 86, 0.2)", "rgba(75, 192, 192, 0.2)", "rgba(153, 102, 255, 0.2)", "rgba(201, 203, 207, 0.2)"],
                            borderColor: ["rgb(54, 162, 235)", "rgb(255, 99, 132)", "rgb(255, 159, 64)", "rgb(255, 205, 86)", "rgb(75, 192, 192)", "rgb(153, 102, 255)", "rgb(201, 203, 207)"],
                            borderWidth: 1
                        }]
                    };
                    var ctx = $("#myChart1").get(0).getContext("2d");
                    var myNewChart = new Chart(ctx, {
                        type: 'pie',
                        data: dataT,
                        options: {
                            responsive: true,
                            title: { display: true, text: 'Total Course Purchase' },
                            legend: { position: 'bottom' },
                            scales: {
                                xAxes: [{ gridLines: { display: false }, display: true, scaleLabel: { display: false, labelString: '' } }],
                                yAxes: [{ gridLines: { display: false }, display: true, scaleLabel: { display: false, labelString: '' }, ticks: { stepSize: 50, beginAtZero: true } }]
                            },
                        }
                    });
                }
            });
</script>
